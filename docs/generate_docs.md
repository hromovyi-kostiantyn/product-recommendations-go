# Генерація документації для проєкту

Цей документ описує процес генерації та перегляду документації для проєкту "Система формування продуктових рекомендацій".

## Встановлення необхідних інструментів

Для генерації документації потрібно встановити наступні інструменти:

### 1. pkgsite

```bash
go install golang.org/x/pkgsite/cmd/pkgsite@latest
```

### 2. godoc (альтернативний метод)

```bash
go install golang.org/x/tools/cmd/godoc@latest
```

## Генерація документації

### Автоматична генерація за допомогою скрипту

Для автоматичної генерації документації використовуйте скрипт:

```bash
# Надаємо права на виконання, якщо потрібно
chmod +x scripts/generate_docs.sh

# Запускаємо скрипт
./scripts/generate_docs.sh
```

Скрипт створить статичну HTML документацію в директорії `docs/generated/`.

### Ручна генерація

Якщо ви хочете самостійно згенерувати документацію, виконайте наступні кроки:

1. Створіть тимчасову директорію для генерації документації:

```bash
mkdir -p temp_docs
cd temp_docs
go mod init example.com/docs
go get github.com/hromovyi-kostiantyn/product-recommendations-go@latest
```

2. Згенеруйте документацію за допомогою pkgsite:

```bash
mkdir -p site
pkgsite -dir=site github.com/hromovyi-kostiantyn/product-recommendations-go
```

3. Скопіюйте згенеровану документацію в директорію проєкту:

```bash
cp -r site/* ../docs/generated/
cd ..
rm -rf temp_docs
```

## Перегляд документації

### Перегляд статичної документації

Для перегляду згенерованої статичної документації:

```bash
cd docs/generated
python -m http.server 8080
```

Відкрийте в браузері http://localhost:8080

### Перегляд документації за допомогою godoc

Альтернативно, ви можете запустити локальний сервер godoc для динамічного перегляду документації:

```bash
# Переконайтеся, що ви знаходитесь в кореневій директорії проєкту
godoc -http=:6060
```

Відкрийте в браузері http://localhost:6060/pkg/github.com/hromovyi-kostiantyn/product-recommendations-go/

## Правила документування коду

При документуванні коду дотримуйтесь наступних правил:

1. **Документація пакетів**:
    - Додавайте коментар перед оголошенням пакету
    - Опишіть призначення пакету та його основні функціональні можливості
    - Додайте приклади використання, якщо це доречно

   ```go
   // Package repository реалізує шар доступу до даних.
   // Цей пакет містить реалізації для взаємодії з базою даних
   // та забезпечує абстракцію для інших шарів.
   package repository
   ```

2. **Документація експортованих елементів**:
    - Документуйте всі експортовані (які починаються з великої літери) типи, функції, методи, константи
    - Розпочинайте документацію з імені елемента
    - Пишіть повні речення
    - Описуйте параметри та значення, що повертаються

   ```go
   // User представляє модель користувача в системі.
   type User struct {
       ID    int64
       Email string
   }

   // FindByEmail повертає користувача за його електронною адресою.
   // Якщо користувача не знайдено, повертає nil та помилку ErrNotFound.
   func (r *UserRepository) FindByEmail(email string) (*User, error) {
   ```

3. **Документація складних алгоритмів**:
    - Описуйте принцип роботи складних алгоритмів
    - Зазначайте використані алгоритми та формули
    - Наводьте посилання на відповідну літературу або статті, якщо доречно

4. **Приклади використання**:
    - Створюйте приклади як тестові функції в окремих файлах
    - Називайте функції прикладів відповідно до конвенцій Go: `Example<FunctionName>`
    - Використовуйте коментарі `// Output:` для відображення очікуваного результату

   ```go
   func ExampleUserRepository_FindByEmail() {
       repo := NewUserRepository(db)
       user, err := repo.FindByEmail("user@example.com")
       fmt.Println(user.Email)
       // Output: user@example.com
   }
   ```

## Перевірка якості документації

Для перевірки якості документації використовуйте:

1. **golint** - перевіряє наявність документації для експортованих елементів:

```bash
golint ./...
```

2. **godoc** - перегляньте як виглядає ваша документація:

```bash
godoc -http=:6060
```

3. **go doc** - перевірте документацію конкретного пакету або елементу:

```bash
go doc github.com/hromovyi-kostiantyn/product-recommendations-go/internal/service
```